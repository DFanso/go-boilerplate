// Code generated by goa v3.23.4, DO NOT EDIT.
//
// identity gRPC server
//
// Command:
// $ goa gen github.com/vidwadeseram/go-boilerplate/identity-api/design

package server

import (
	"context"

	identitypb "github.com/vidwadeseram/go-boilerplate/identity-api/gen/grpc/identity/pb"
	identity "github.com/vidwadeseram/go-boilerplate/identity-api/gen/identity"
	goagrpc "goa.design/goa/v3/grpc"
	goa "goa.design/goa/v3/pkg"
)

// Server implements the identitypb.IdentityServer interface.
type Server struct {
	RegisterH      goagrpc.UnaryHandler
	LoginH         goagrpc.UnaryHandler
	ValidateTokenH goagrpc.UnaryHandler
	identitypb.UnimplementedIdentityServer
}

// New instantiates the server struct with the identity service endpoints.
func New(e *identity.Endpoints, uh goagrpc.UnaryHandler) *Server {
	return &Server{
		RegisterH:      NewRegisterHandler(e.Register, uh),
		LoginH:         NewLoginHandler(e.Login, uh),
		ValidateTokenH: NewValidateTokenHandler(e.ValidateToken, uh),
	}
}

// NewRegisterHandler creates a gRPC handler which serves the "identity"
// service "register" endpoint.
func NewRegisterHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeRegisterRequest, EncodeRegisterResponse)
	}
	return h
}

// Register implements the "Register" method in identitypb.IdentityServer
// interface.
func (s *Server) Register(ctx context.Context, message *identitypb.RegisterRequest) (*identitypb.RegisterResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "register")
	ctx = context.WithValue(ctx, goa.ServiceKey, "identity")
	resp, err := s.RegisterH.Handle(ctx, message)
	if err != nil {
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*identitypb.RegisterResponse), nil
}

// NewLoginHandler creates a gRPC handler which serves the "identity" service
// "login" endpoint.
func NewLoginHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeLoginRequest, EncodeLoginResponse)
	}
	return h
}

// Login implements the "Login" method in identitypb.IdentityServer interface.
func (s *Server) Login(ctx context.Context, message *identitypb.LoginRequest) (*identitypb.LoginResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "login")
	ctx = context.WithValue(ctx, goa.ServiceKey, "identity")
	resp, err := s.LoginH.Handle(ctx, message)
	if err != nil {
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*identitypb.LoginResponse), nil
}

// NewValidateTokenHandler creates a gRPC handler which serves the "identity"
// service "validate_token" endpoint.
func NewValidateTokenHandler(endpoint goa.Endpoint, h goagrpc.UnaryHandler) goagrpc.UnaryHandler {
	if h == nil {
		h = goagrpc.NewUnaryHandler(endpoint, DecodeValidateTokenRequest, EncodeValidateTokenResponse)
	}
	return h
}

// ValidateToken implements the "ValidateToken" method in
// identitypb.IdentityServer interface.
func (s *Server) ValidateToken(ctx context.Context, message *identitypb.ValidateTokenRequest) (*identitypb.ValidateTokenResponse, error) {
	ctx = context.WithValue(ctx, goa.MethodKey, "validate_token")
	ctx = context.WithValue(ctx, goa.ServiceKey, "identity")
	resp, err := s.ValidateTokenH.Handle(ctx, message)
	if err != nil {
		return nil, goagrpc.EncodeError(err)
	}
	return resp.(*identitypb.ValidateTokenResponse), nil
}
